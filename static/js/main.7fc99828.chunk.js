(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{27:function(e,t,a){e.exports=a(41)},32:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),l=(a(32),a(16)),u=a(5),o=a(44),s=a(45),m=a(46),d=a(43);var f={width:"300px"},h=function(e){var t=e.label,a=e.accept,n=e.onChangeHandler;return r.a.createElement("div",null,r.a.createElement(d.a.File,{type:"file",accept:a,label:t,style:f,custom:!0,onChange:function(e){return n(e)}}))},v=a(6),p=a.n(v),b=a(7);function g(e){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(t.target.files&&t.target.files.item(0)){var n=URL.createObjectURL(t.target.files[0]),r=new Image;return r.onload=function(){return e(r)},void(r.src=n)}a("No file selected")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=Object(u.a)(e.isRedEdit,2),a=t[0],n=t[1],c=function(){n((function(e){return!e}))};return r.a.createElement("div",null,r.a.createElement("div",null,"Currently editing:"),r.a.createElement(m.a,{active:a,className:"mr-2",variant:"outline-danger",onClick:c},"Red"),r.a.createElement(m.a,{active:!a,variant:"outline-primary",onClick:c},"Blue"))},O=a(20);function x(e){return function(t,a,n){return 2*t-(a+n)>255-e}}function w(e){return function(t,a,n){return 2*n-(a+t)>255-e}}function y(e,t,a,n){return C.apply(this,arguments)}function C(){return(C=Object(b.a)(p.a.mark((function e(t,a,n,r){var c,i,l,o,s,m,d,f,h,v,b,g,E,j,O,x,w;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=t.detectionWidth,i=t.detectionHeight,l=W(r),o=Object(u.a)(l,3),s=o[0],m=o[1],d=o[2],f=[],h=a.data.slice(),v=0;v<i;v++)for(b=0;b<c;b++)g=P(b,v,c)+0,E=P(b,v,c)+1,j=P(b,v,c)+2,O=h[g],x=h[E],w=h[j],n(O,x,w)&&(a.data[g]=Number(s),a.data[E]=Number(m),a.data[j]=Number(d),f.push({x:b,y:v}));return e.abrupt("return",Promise.resolve([a,f]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,a,n){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(p.a.mark((function e(t,a,n,r){var c,i,l,o,s,m,d,f,h,v,b,g,E,j,x,w,y,C,R,k,S,B,D,I,K,L,M,T;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.width,i=t.height,l=W(n),o=Object(u.a)(l,3),s=o[0],m=o[1],d=o[2],f=a.getImageData(0,0,c,i),h=0,v=0,b=new Map,g=N(H,b),E=Object(O.a)(r);try{for(E.s();!(j=E.n()).done;)x=j.value,w=x.x,y=x.y,v=Math.max(y,v),C=H(w,y),b.set(C,null),h++}catch(p){E.e(p)}finally{E.f()}R=Object(O.a)(r);try{for(R.s();!(k=R.n()).done;)for(S=k.value,B=S.x,D=S.y,I=D;I<v;I++)g(B,I)||(K=P(B,I,c)+0,L=P(B,I,c)+1,M=P(B,I,c)+2,f.data[K]=s,f.data[L]=m,f.data[M]=d,T=H(B,I),b.set(T,null),h++)}catch(p){R.e(p)}finally{R.f()}return e.abrupt("return",Promise.resolve([f,h]));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return String(e)+String(t)}function N(e,t){return function(a,n){var r=e(a,n);return t.has(r)}}function W(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function P(e,t,a){return 4*(e+t*a)}function S(e,t,a,n){null!=e&&e.drawImage(n,0,0,t,a)}function B(){return(B=Object(b.a)(p.a.mark((function e(t,a,n,r,c,i){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),S(a,n,r,c),i(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],i=a[1],l=e.recolorHex,o=Object(u.a)(e.isRedEdit,1)[0],s=Object(u.a)(e.canvasContext,1)[0],d=Object(u.a)(e.detectionThreshold,1)[0],f=Object(u.a)(e.numPixelsColoredRed,2)[1],h=Object(u.a)(e.numPixelsColoredBlue,2)[1],v=Object(u.a)(e.image,1)[0],g=e.canvasDimensions,E=g.canvasWidth,j=g.canvasHeight;function O(){return(O=Object(b.a)(p.a.mark((function e(){var t,a,n,r,c,m,f,h,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.width,a=v.height,n={detectionWidth:t,detectionHeight:a},r=s.getImageData(0,0,t,a),c=o?x(d):w(d),e.next=6,y(n,r,c,l);case 6:m=e.sent,f=Object(u.a)(m,2),h=f[0],b=f[1],s.putImageData(h,0,0,0,0,t,a),i(b);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(v,s,l,c);case 2:t=e.sent,a=Object(u.a)(t,2),n=a[0],r=a[1],(o?f:h)(r),s.putImageData(n,0,0,0,0,E,j);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return O.apply(this,arguments)}(e)}},"Recolor detected"),r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return C.apply(this,arguments)}(e)}},"Color area"),r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){!function(e,t,a,n,r,c){B.apply(this,arguments)}(e,s,E,j,v,o?f:h)}},"Reset"))};a(37);var I=function(e){var t=Object(u.a)(e.numPixelsColoredRed,2),a=t[0],c=t[1],i=Object(u.a)(e.numPixelsColoredBlue,2),o=i[0],s=i[1],m=e.isRedEdit,f=Object(n.useState)(0),h=Object(u.a)(f,2),v=h[0],p=h[1],b=Object(n.useState)("#00FF00"),g=Object(u.a)(b,2),E=g[0],O=g[1],x=Object(l.a)({numPixelsColoredRed:[a,c],detectionThreshold:[v,p],numPixelsColoredBlue:[o,s],recolorHex:E},e);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(j,{isRedEdit:m})),r.a.createElement("div",null,r.a.createElement(d.a.Label,null,"Recolor:"),r.a.createElement(d.a.Control,{className:"mx-auto input",type:"color",value:E,onChange:function(e){return function(e,t){t(e.target.value)}(e,O)}})),r.a.createElement("div",null,r.a.createElement(d.a.Label,null,"Sensitivity:",v),r.a.createElement(d.a.Control,{className:"mx-auto input",type:"range",min:0,max:255,value:v,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(D,x)),r.a.createElement("h5",null,"Results: "),r.a.createElement("div",null,r.a.createElement("div",null,"Red pixel count: ",a),r.a.createElement("div",null,"Blue pixel count: ",o),r.a.createElement("div",null,"Red / Blue ratio: ",o/a)))};a(38);var K=function(e){var t=e.image,a=e.canvasDimensions,c=a.canvasWidth,i=a.canvasHeight,l=e.drawDimensions,o=l.drawWidth,s=l.drawHeight,m=Object(u.a)(e.canvasContext,2),d=m[0],f=m[1],h=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=h.current.getContext("2d");f(e)}),[]),Object(n.useEffect)((function(){if(null!=t&&null!=d&&null!=h){var e=h.current;e.width=c,e.height=i,d.drawImage(t,0,0,o,s)}}),[t,o,s,c,i]),r.a.createElement("div",null,r.a.createElement("canvas",{ref:h,className:"border"}))};function L(){return(L=Object(b.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,a);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(39);var M=function(){var e,t,a=Object(n.useState)({}),c=Object(u.a)(a,2),i=c[0],d=c[1],f=Object(n.useState)(!0),v=Object(u.a)(f,2),p=v[0],b=v[1],g=Object(n.useState)(null),E=Object(u.a)(g,2),j=E[0],O=E[1],x=Object(n.useState)(null),w=Object(u.a)(x,2),y=w[0],C=w[1],R=Object(n.useState)(0),k=Object(u.a)(R,2),H=k[0],N=k[1],W=Object(n.useState)(0),P=Object(u.a)(W,2),S=P[0],B=P[1],D=Math.min(500,Math.max(document.documentElement.clientWidth||0,window.innerWidth||0))-50,M={width:D,height:(e=i.height,t=i.width,e*D/t)},T={image:i,canvasDimensions:{canvasWidth:M.width,canvasHeight:M.height},drawDimensions:{drawWidth:M.width,drawHeight:M.height},canvasContext:[j,O]},F=Object(l.a)({},T,{canvasContext:[y,C]}),A={image:[i,d],isRedEdit:[p,b],canvasContext:p?[j,O]:[y,C],canvasDimensions:{canvasWidth:M.width,canvasHeight:M.height},numPixelsColoredRed:[H,N],numPixelsColoredBlue:[S,B]};return r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"Welcome to P-calc"),r.a.createElement("div",null,r.a.createElement(o.a,{defaultActiveKey:"0"},r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(o.a.Toggle,{as:m.a,variant:"link",eventKey:"0"},"Image input")),r.a.createElement(o.a.Collapse,{eventKey:"0"},r.a.createElement(s.a.Body,null,r.a.createElement(h,{accept:"image/*",label:"Choose image",onChangeHandler:function(e){return function(e,t){return L.apply(this,arguments)}(e,d)}})))),r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(o.a.Toggle,{as:m.a,variant:"link",eventKey:"1"},"Image analysis")),r.a.createElement(o.a.Collapse,{eventKey:"1"},r.a.createElement(s.a.Body,null,r.a.createElement("div",null,r.a.createElement(K,Object.assign({isHidden:!p},T))),r.a.createElement("div",null,r.a.createElement(K,Object.assign({isHidden:p},F))),r.a.createElement(I,A)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(40);i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.7fc99828.chunk.js.map