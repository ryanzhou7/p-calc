(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{26:function(e,t,a){e.exports=a(40)},31:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),u=(a(31),a(5)),l=a.n(u),o=a(7),s=a(6),m=a(43),f=a(44),h=a(45),v=a(42);var d={width:"300px"},p=function(e){var t=e.label,a=e.accept,n=e.onChangeHandler;return r.a.createElement("div",null,r.a.createElement(v.a.File,{type:"file",accept:a,label:t,style:d,custom:!0,onChange:function(e){return n(e)}}))};function g(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(t.target.files&&t.target.files.item(0)){var n=URL.createObjectURL(t.target.files[0]),r=new Image;return r.onload=function(){return e(r)},void(r.src=n)}a("No file selected")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=a(18);function E(e){return function(t,a,n){return 2*t-(a+n)>e}}function y(e,t,a,n){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(l.a.mark((function e(t,a,n,r){var c,i,u,o,m,f,h,v,d,p,g,b,w,E,y,j,O;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=t.detectionWidth,i=t.detectionHeight,u=H(r),o=Object(s.a)(u,3),m=o[0],f=o[1],h=o[2],v=[],d=a.data.slice(),p=0;p<i;p++)for(g=0;g<c;g++)b=N(g,p,c)+0,w=N(g,p,c)+1,E=N(g,p,c)+2,y=d[b],j=d[w],O=d[E],n(y,j,O)&&(a.data[b]=Number(m),a.data[w]=Number(f),a.data[E]=Number(h),v.push({x:g,y:p}));return e.abrupt("return",Promise.resolve([a,v]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,a,n){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(l.a.mark((function e(t,a,n,r){var c,i,u,o,m,f,h,v,d,p,g,b,E,y,j,O,x,D,W,I,S,R,K,L,B,P,F;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.width,i=t.height,u=H(n),o=Object(s.a)(u,3),m=o[0],f=o[1],h=o[2],v=a.getImageData(0,0,c,i),d=0,p=0,g=new Map,b=k(C,g),E=Object(w.a)(r);try{for(E.s();!(y=E.n()).done;)j=y.value,O=j.x,x=j.y,p=Math.max(x,p),D=C(O,x),g.set(D,null),d++}catch(l){E.e(l)}finally{E.f()}W=Object(w.a)(r);try{for(W.s();!(I=W.n()).done;)for(S=I.value,R=S.x,K=S.y,L=K;L<p;L++)b(R,L)||(B=N(R,L,c)+0,P=N(R,L,c)+1,F=N(R,L,c)+2,v.data[B]=m,v.data[P]=f,v.data[F]=h,d++)}catch(l){W.e(l)}finally{W.f()}return e.abrupt("return",Promise.resolve([v,d]));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return String(e)+String(t)}function k(e,t){return function(a,n){var r=e(a,n);return t.has(r)}}function H(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function N(e,t,a){return 4*(e+t*a)}function D(e,t,a,n){null!=e&&e.drawImage(n,0,0,t,a)}a(36);var W=function(e){var t=e.canvasDimensions,a=t.canvasWidth,c=t.canvasHeight,i=Object(s.a)(e.image,1)[0],u=Object(n.useState)(150),m=Object(s.a)(u,2),f=m[0],d=m[1],p=Object(n.useState)(0),g=Object(s.a)(p,2),b=g[0],w=g[1],j=Object(s.a)(e.canvasContext,1)[0],x=Object(n.useState)([]),C=Object(s.a)(x,2),k=C[0],H=C[1],N=Object(n.useState)("#0000FF"),W=Object(s.a)(N,2),I=W[0],S=W[1];function R(){return(R=Object(o.a)(l.a.mark((function e(){var t,a,n,r,c,u,o,m,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.width,a=i.height,n={detectionWidth:t,detectionHeight:a},r=j.getImageData(0,0,t,a),c=E(f),e.next=6,y(n,r,c,I);case 6:u=e.sent,o=Object(s.a)(u,2),m=o[0],h=o[1],j.putImageData(m,0,0,0,0,t,a),H(h);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(o.a)(l.a.mark((function e(){var t,n,r,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(i,j,I,k);case 2:t=e.sent,n=Object(s.a)(t,2),r=n[0],u=n[1],w(u),j.putImageData(r,0,0,0,0,a,c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),D(j,a,c,i),w(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Label,null,"Recolor:"),r.a.createElement(v.a.Control,{className:"mx-auto input",type:"color",value:I,onChange:function(e){S(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(v.a.Label,null,"Sensitivity: ",f),r.a.createElement(v.a.Control,{className:"mx-auto input",type:"range",min:"0",max:"255",value:f,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(h.a,{className:"mx-1",onClick:function(e){return function(){return R.apply(this,arguments)}(e)}},"Recolor detected"),r.a.createElement(h.a,{className:"mx-1",onClick:function(e){return function(){return K.apply(this,arguments)}(e)}},"Color area"),r.a.createElement(h.a,{className:"mx-1",onClick:function(e){return function(e){return L.apply(this,arguments)}(e)}},"Reset")),r.a.createElement("div",null,r.a.createElement("div",null,"Pixel count: ",b)))};a(37);var I=function(e){var t=e.image.image,a=e.canvasDimensions,c=a.canvasWidth,i=a.canvasHeight,u=e.drawDimensions,l=u.drawWidth,o=u.drawHeight,m=Object(s.a)(e.canvasContext,2),f=m[0],h=m[1],v=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=v.current.getContext("2d");h(e)}),[]),Object(n.useEffect)((function(){if(null!=t&&null!=f){var e=v.current;e.width=c,e.height=i,f.drawImage(t,0,0,l,o)}}),[t]),r.a.createElement("div",null,r.a.createElement("canvas",{ref:v,className:"border"}))};a(38),a(39);var S=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(null),u=Object(s.a)(i,2),v=u[0],d=u[1],b=Object(n.useState)({width:0,height:0}),w=Object(s.a)(b,2),E=(w[0],w[1]);Object(n.useLayoutEffect)((function(){E({width:a.width,height:a.height})}),a);var y=function(){var e=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,c);case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"Welcome to G-calc"),r.a.createElement("div",null,r.a.createElement(I,{image:{image:a},canvasDimensions:{canvasWidth:a.width,canvasHeight:a.height},drawDimensions:{drawWidth:a.width,drawHeight:a.height},canvasContext:[v,d]})),r.a.createElement("div",null,r.a.createElement(m.a,{defaultActiveKey:"0"},r.a.createElement(f.a,null,r.a.createElement(f.a.Header,null,r.a.createElement(m.a.Toggle,{as:h.a,variant:"link",eventKey:"0"},"1. Image input")),r.a.createElement(m.a.Collapse,{eventKey:"0"},r.a.createElement(f.a.Body,null,r.a.createElement(p,{accept:"image/*",label:"Choose image",onChangeHandler:y})))),r.a.createElement(f.a,null,r.a.createElement(f.a.Header,null,r.a.createElement(m.a.Toggle,{as:h.a,variant:"link",eventKey:"1"},"2. Image analysis")),r.a.createElement(m.a.Collapse,{eventKey:"1"},r.a.createElement(f.a.Body,null,r.a.createElement(W,{image:[a,c],canvasContext:[v,d],canvasDimensions:{canvasWidth:a.width,canvasHeight:a.height}})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.19bd07bc.chunk.js.map