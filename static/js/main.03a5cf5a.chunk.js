(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{26:function(e,t,a){e.exports=a(39)},31:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),u=(a(31),a(7)),i=a.n(u),o=a(9),s=a(5);function m(){return(m=Object(o.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&t.target.files.item(0)&&(n=URL.createObjectURL(t.target.files[0]),(r=new Image).src=n,r.onload=function(){a(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=a(41);var h={width:"300px"},v=function(e){var t=e.setImage;return r.a.createElement("div",null,r.a.createElement(f.a.File,{type:"file",accept:"image/*",label:"Custom file input",style:h,custom:!0,onChange:function(e){return function(e,t){return m.apply(this,arguments)}(e,t)}}))};a(36);var d=a(44);var g=a(19);function p(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function b(e,t,a){return 4*(e+t*a)}var E={width:"200px"},y=function(e){var t=e.canvasDimensions,a=e.resetImage,c=e.image,l=Object(n.useState)(0),u=Object(s.a)(l,2),i=u[0],o=u[1],m=Object(n.useState)(0),h=Object(s.a)(m,2),v=h[0],y=h[1],j=Object(s.a)(e.canvasContext,2),w=j[0],O=(j[1],Object(n.useState)([])),x=Object(s.a)(O,2),C=x[0],k=x[1],I=Object(n.useState)("#0000FF"),N=Object(s.a)(I,2),S=N[0],D=N[1],F=Object(n.useState)("#FF0000"),R=Object(s.a)(F,2),K=R[0],L=R[1],T=function(){var e=function(e,t,a,n,r){for(var c=p(n),l=Object(s.a)(c,3),u=l[0],i=l[1],o=l[2],m=[],f=e.width,h=e.height,v=t.getImageData(0,0,f,h),d=v.data.slice(),g=0;g<h;g++)for(var E=0;E<f;E++){var y=b(E,g,f)+0,j=b(E,g,f)+1,w=b(E,g,f)+2,O=d[y],x=d[j],C=d[w];2*O-(x+C)>a&&(v.data[y]=Number(u),v.data[j]=Number(i),v.data[w]=Number(o),m.push({x:E,y:g}))}return[v,m]}(c,w,i,S),a=Object(s.a)(e,2),n=a[0],r=a[1];w.putImageData(n,0,0,0,0,t.width,t.height),k(r)},W=function(){var e=function(e,t,a,n){var r,c=p(a),l=Object(s.a)(c,3),u=l[0],i=l[1],o=l[2],m=e.width,f=e.height,h=t.getImageData(0,0,m,f),v=0,d=0,E=Object(g.a)(n);try{for(E.s();!(r=E.n()).done;){var y=r.value.y;d=Math.max(y,d)}}catch(S){E.e(S)}finally{E.f()}var j,w=Object(g.a)(n);try{for(w.s();!(j=w.n()).done;)for(var O=j.value,x=O.x,C=O.y;C<d;C++){var k=b(x,C,m)+0,I=b(x,C,m)+1,N=b(x,C,m)+2;h.data[k]=u,h.data[I]=i,h.data[N]=o,v++}}catch(S){w.e(S)}finally{w.f()}return[h,v]}(c,w,S,C),a=Object(s.a)(e,2),n=a[0],r=a[1];y(r),w.putImageData(n,0,0,0,0,t.width,t.height)};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(f.a.Label,null,"Target detection Color:"),r.a.createElement(f.a.Control,{className:"mx-auto",style:E,type:"color",value:K,onChange:function(e){return function(e){e.preventDefault();var t=e.target.value;L(t)}(e)}}),r.a.createElement(f.a.Label,null,"Recolor:"),r.a.createElement(f.a.Control,{className:"mx-auto",style:E,type:"color",value:S,onChange:function(e){return function(e,t){t(e.target.value)}(e,D)}})),r.a.createElement("div",null,r.a.createElement(f.a.Label,null,"Sensitivity"),r.a.createElement(f.a.Control,{className:"mx-auto",style:E,type:"range",min:"0",max:"255",value:i,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(d.a,{className:"mx-1",onClick:function(e){return T()}},"Analyze"),r.a.createElement(d.a,{className:"mx-1",onClick:function(e){return W()}},"Color area"),r.a.createElement(d.a,{className:"mx-1",onClick:function(e){e.preventDefault(),a()}},"Reset analysis")),r.a.createElement("div",null,r.a.createElement("div",null,"Pixel count: ",v)))},j=a(42),w=a(43);function O(e,t,a,n){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function e(t,a,n,r){var c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a&&null!=r&&null!=t){e.next=2;break}return e.abrupt("return");case 2:t.clearRect(0,0,a.width,a.height),t.save(),t.translate(a.width/2,a.height/2),t.rotate(k(n)),c=window.innerWidth-50,l=r.height/c*c,t.drawImage(r,-c/2,-l/2),t.restore();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,a){if(null!=t&&null!=a){var n=window.innerWidth-50,r=a.width,c=a.height/r*(n=Math.min(n,1e3));return t.width=n,t.height=c,e.drawImage(a,0,0,n,c),{width:n,height:c}}}function k(e){return.01745*e}function I(e,t){null!=t&&null!=e&&e.clearRect(0,0,t.width,t.height)}a(37),a(38);var N=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),m=u[0],f=u[1],h=Object(n.useState)(0),g=Object(s.a)(h,2),p=g[0],b=(g[1],Object(n.useState)({x:0,y:0})),E=Object(s.a)(b,2),x=E[0],k=(E[1],Object(n.useState)({width:0,height:0})),N=Object(s.a)(k,2),S=N[0],D=N[1],F=Object(n.useRef)(null);function R(){return K.apply(this,arguments)}function K(){return(K=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=F.current,I(m,t),n=C(m,t,a),D(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=F.current.getContext("2d");f(e)}),[]),Object(n.useEffect)((function(){R()}),[a]),Object(n.useEffect)((function(){var e=F.current;I(m,e),O(m,e,p,a)}),[p]),Object(n.useEffect)((function(){var e=F.current;I(m,e),O(m,e,p,a),function(e,t,a,n){if(null!=t&&null!=n){a.x;var r=a.y,c=t.width,l=t.height/2+r;e.beginPath(),e.moveTo(0,l+r),e.lineTo(0+c,l+r),e.strokeStyle="#FF0000",e.stroke()}}(m,F.current,x,a)}),[x]),r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"Welcome to G-calc"),r.a.createElement("div",null,r.a.createElement("canvas",{ref:F,className:"preview-canvas"})),r.a.createElement("div",null,r.a.createElement(j.a,{defaultActiveKey:"0"},r.a.createElement(w.a,null,r.a.createElement(w.a.Header,null,r.a.createElement(j.a.Toggle,{as:d.a,variant:"link",eventKey:"0"},"1. Image input")),r.a.createElement(j.a.Collapse,{eventKey:"0"},r.a.createElement(w.a.Body,null,r.a.createElement(v,{setImage:c})))),r.a.createElement(w.a,null,r.a.createElement(w.a.Header,null,r.a.createElement(j.a.Toggle,{as:d.a,variant:"link",eventKey:"1"},"2. Image analysis")),r.a.createElement(j.a.Collapse,{eventKey:"1"},r.a.createElement(w.a.Body,null,r.a.createElement(y,{image:a,canvasContext:[m,f],resetImage:R,canvasDimensions:S})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.03a5cf5a.chunk.js.map