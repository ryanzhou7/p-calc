(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{26:function(e,t,a){e.exports=a(40)},31:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),l=(a(31),a(6)),u=a.n(l),o=a(7),s=a(5),m=a(43),d=a(44),v=a(45),f=a(42);var h={width:"300px"},p=function(e){var t=e.label,a=e.accept,n=e.onChangeHandler;return r.a.createElement("div",null,r.a.createElement(f.a.File,{type:"file",accept:a,label:t,style:h,custom:!0,onChange:function(e){return n(e)}}))};function g(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(t.target.files&&t.target.files.item(0)){var n=URL.createObjectURL(t.target.files[0]),r=new Image;return r.onload=function(){return e(r)},void(r.src=n)}a("No file selected")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=a(19);function w(e){return function(t,a,n){return 2*t-(a+n)>e}}function j(e){return function(t,a,n){return 2*n-(a+t)>e}}function O(e,t,a,n){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(u.a.mark((function e(t,a,n,r){var c,i,l,o,m,d,v,f,h,p,g,b,E,w,j,O,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=t.detectionWidth,i=t.detectionHeight,l=R(r),o=Object(s.a)(l,3),m=o[0],d=o[1],v=o[2],f=[],h=a.data.slice(),p=0;p<i;p++)for(g=0;g<c;g++)b=D(g,p,c)+0,E=D(g,p,c)+1,w=D(g,p,c)+2,j=h[b],O=h[E],y=h[w],n(j,O,y)&&(a.data[b]=Number(m),a.data[E]=Number(d),a.data[w]=Number(v),f.push({x:g,y:p}));return e.abrupt("return",Promise.resolve([a,f]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,a,n){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(u.a.mark((function e(t,a,n,r){var c,i,l,o,m,d,v,f,h,p,g,b,w,j,O,y,x,C,N,S,W,I,B,K,L,F,P,A;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.width,i=t.height,l=R(n),o=Object(s.a)(l,3),m=o[0],d=o[1],v=o[2],f=a.getImageData(0,0,c,i),h=0,p=0,g=new Map,b=H(k,g),w=Object(E.a)(r);try{for(w.s();!(j=w.n()).done;)O=j.value,y=O.x,x=O.y,p=Math.max(x,p),C=k(y,x),g.set(C,null),h++}catch(u){w.e(u)}finally{w.f()}N=Object(E.a)(r);try{for(N.s();!(S=N.n()).done;)for(W=S.value,I=W.x,B=W.y,K=B;K<p;K++)b(I,K)||(L=D(I,K,c)+0,F=D(I,K,c)+1,P=D(I,K,c)+2,f.data[L]=m,f.data[F]=d,f.data[P]=v,A=k(I,K),g.set(A,null),h++)}catch(u){N.e(u)}finally{N.f()}return e.abrupt("return",Promise.resolve([f,h]));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return String(e)+String(t)}function H(e,t){return function(a,n){var r=e(a,n);return t.has(r)}}function R(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function D(e,t,a){return 4*(e+t*a)}var N=function(e){var t=Object(s.a)(e.isRedEdit,2),a=t[0],n=t[1],c=function(){n((function(e){return!e}))};return r.a.createElement("div",null,r.a.createElement("div",null,"Currently editing:"),r.a.createElement(v.a,{active:a,className:"mr-2",variant:"outline-danger",onClick:c},"Red"),r.a.createElement(v.a,{active:!a,variant:"outline-primary",onClick:c},"Blue"))};function S(e,t,a,n){null!=e&&e.drawImage(n,0,0,t,a)}function W(){return(W=Object(o.a)(u.a.mark((function e(t,a,n,r,c,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),S(a,n,r,c),i(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(e,t,a,n,r,c){return W.apply(this,arguments)};a(36);var B=function(e){var t=Object(s.a)(e.isRedEdit,1)[0],a=e.canvasDimensions,c=a.canvasWidth,i=a.canvasHeight,l=Object(s.a)(e.image,1)[0],m=Object(n.useState)(0),d=Object(s.a)(m,2),h=d[0],p=d[1],g=Object(n.useState)(0),b=Object(s.a)(g,2),E=b[0],y=b[1],C=Object(n.useState)(0),k=Object(s.a)(C,2),H=k[0],R=k[1],D=Object(s.a)(e.canvasContext,1)[0],S=Object(n.useState)([]),W=Object(s.a)(S,2),B=W[0],K=W[1],L=Object(n.useState)("#00FF00"),F=Object(s.a)(L,2),P=F[0],A=F[1];function J(){return(J=Object(o.a)(u.a.mark((function e(){var a,n,r,c,i,o,m,d,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.width,n=l.height,r={detectionWidth:a,detectionHeight:n},c=D.getImageData(0,0,a,n),i=t?w(h):j(h),e.next=6,O(r,c,i,P);case 6:o=e.sent,m=Object(s.a)(o,2),d=m[0],v=m[1],D.putImageData(d,0,0,0,0,a,n),K(v);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(o.a)(u.a.mark((function e(){var a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(l,D,P,B);case 2:a=e.sent,n=Object(s.a)(a,2),r=n[0],o=n[1],(t?y:R)(o),D.putImageData(r,0,0,0,0,c,i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(N,{isRedEdit:e.isRedEdit})),r.a.createElement("div",null,r.a.createElement(f.a.Label,null,"Recolor:"),r.a.createElement(f.a.Control,{className:"mx-auto input",type:"color",value:P,onChange:function(e){return function(e,t){t(e.target.value)}(e,A)}})),r.a.createElement("div",null,r.a.createElement(f.a.Label,null,"Sensitivity: ",h),r.a.createElement(f.a.Control,{className:"mx-auto input",type:"range",min:"0",max:"255",value:h,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(v.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return J.apply(this,arguments)}(e)}},"Recolor detected"),r.a.createElement(v.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return M.apply(this,arguments)}(e)}},"Color area"),r.a.createElement(v.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){I(e,D,c,i,l,t?y:R)}},"Reset")),r.a.createElement("div",null,r.a.createElement("div",null,"Red pixel count: ",E),r.a.createElement("div",null,"Blue pixel count: ",H),r.a.createElement("div",null,"Red / Blue ratio: ",H/E)))};a(37);var K=function(e){var t=e.image.image,a=e.canvasDimensions,c=a.canvasWidth,i=a.canvasHeight,l=e.drawDimensions,u=l.drawWidth,o=l.drawHeight,m=Object(s.a)(e.canvasContext,2),d=m[0],v=m[1],f=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=f.current.getContext("2d");v(e)}),[]),Object(n.useEffect)((function(){if(null!=t&&null!=d){var e=f.current;e.width=c,e.height=i,d.drawImage(t,0,0,u,o)}}),[t]),r.a.createElement("div",null,r.a.createElement("canvas",{ref:f,className:"border"}))};a(38);var L=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),l=Object(s.a)(i,2),f=l[0],h=l[1],b=Object(n.useState)(null),E=Object(s.a)(b,2),w=E[0],j=E[1],O=Object(n.useState)(null),y=Object(s.a)(O,2),x=y[0],C=y[1],k=Object(n.useState)({width:0,height:0}),H=Object(s.a)(k,2),R=(H[0],H[1]);Object(n.useEffect)((function(){R({width:a.width,height:a.height})}),a);var D=function(){var e=Object(o.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,c);case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=f?[w,j]:[x,C];return r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"Welcome to G-calc"),r.a.createElement("div",null,r.a.createElement(K,{image:{image:a},canvasDimensions:{canvasWidth:a.width,canvasHeight:a.height},drawDimensions:{drawWidth:a.width,drawHeight:a.height},canvasContext:[w,j]})),r.a.createElement("div",null,r.a.createElement(K,{image:{image:a},canvasDimensions:{canvasWidth:a.width,canvasHeight:a.height},drawDimensions:{drawWidth:a.width,drawHeight:a.height},canvasContext:[x,C]})),r.a.createElement("div",null,r.a.createElement(m.a,{defaultActiveKey:"0"},r.a.createElement(d.a,null,r.a.createElement(d.a.Header,null,r.a.createElement(m.a.Toggle,{as:v.a,variant:"link",eventKey:"0"},"1. Image input")),r.a.createElement(m.a.Collapse,{eventKey:"0"},r.a.createElement(d.a.Body,null,r.a.createElement(p,{accept:"image/*",label:"Choose image",onChangeHandler:D})))),r.a.createElement(d.a,null,r.a.createElement(d.a.Header,null,r.a.createElement(m.a.Toggle,{as:v.a,variant:"link",eventKey:"1"},"2. Image analysis")),r.a.createElement(m.a.Collapse,{eventKey:"1"},r.a.createElement(d.a.Body,null,r.a.createElement(B,{image:[a,c],isRedEdit:[f,h],canvasContext:N,canvasDimensions:{canvasWidth:a.width,canvasHeight:a.height}})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(39);i.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.7179c29c.chunk.js.map