(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{27:function(e,t,a){e.exports=a(42)},32:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),l=(a(32),a(16)),u=a(5),o=a(45),s=a(46),m=a(47),d=a(44);var f={width:"300px"},v=function(e){var t=e.label,a=e.accept,n=e.onChangeHandler;return r.a.createElement("div",null,r.a.createElement(d.a.File,{type:"file",accept:a,label:t,style:f,custom:!0,onChange:function(e){return n(e)}}))},h=a(6),p=a.n(h),E=a(7);function g(e){return b.apply(this,arguments)}function b(){return(b=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(t.target.files&&t.target.files.item(0)){var n=URL.createObjectURL(t.target.files[0]),r=new Image;return r.onload=function(){return e(r)},void(r.src=n)}a("No file selected")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){var t=Object(u.a)(e.isRedEdit,2),a=t[0],n=t[1],c=function(){n((function(e){return!e}))};return r.a.createElement("div",null,r.a.createElement("div",null,"Currently editing:"),r.a.createElement(m.a,{active:a,className:"mr-2",variant:"outline-danger",onClick:c},"Red"),r.a.createElement(m.a,{active:!a,variant:"outline-primary",onClick:c},"Blue"))};a(37);function j(e,t,a){e.preventDefault(),t((function(e){return e+a}))}function O(e,t,a,n){e.preventDefault(),n((function(e){var n=e.x,r=e.y;return{x:n+t,y:r+a}}))}var w=function(e){var t=Object(u.a)(e.rotationDegrees,2),a=t[0],n=t[1],c=Object(u.a)(e.axisCoordinates,2),i=c[0],l=c[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"Axis offset Y:",i.y),r.a.createElement("div",null,"Move Vertical"),r.a.createElement(m.a,{className:"mx-1",onClick:function(e){return O(e,0,-1,l)}},"Move up"),r.a.createElement(m.a,{className:"mx-1",onClick:function(e){return O(e,0,1,l)}},"Move down")),r.a.createElement("div",null,r.a.createElement("div",null,"Degrees of rotation: ",a),r.a.createElement(m.a,{className:"mx-1",onClick:function(e){return j(e,n,-1)}},"Rotate left"),r.a.createElement(m.a,{className:"mx-1",onClick:function(e){return j(e,n,1)}},"Rotate right")))},y=a(20);function C(e){return function(t,a,n){return 2*t-(a+n)>255-e}}function k(e){return function(t,a,n){return 2*n-(a+t)>255-e}}function D(e,t,a,n){return N.apply(this,arguments)}function N(){return(N=Object(E.a)(p.a.mark((function e(t,a,n,r){var c,i,l,o,s,m,d,f,v,h,E,g,b,x,j,O,w;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=t.detectionWidth,i=t.detectionHeight,l=I(r),o=Object(u.a)(l,3),s=o[0],m=o[1],d=o[2],f=[],v=a.data.slice(),h=0;h<i;h++)for(E=0;E<c;E++)g=B(E,h,c)+0,b=B(E,h,c)+1,x=B(E,h,c)+2,j=v[g],O=v[b],w=v[x],n(j,O,w)&&(a.data[g]=Number(s),a.data[b]=Number(m),a.data[x]=Number(d),f.push({x:E,y:h}));return e.abrupt("return",Promise.resolve([a,f]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,a,n){return H.apply(this,arguments)}function H(){return(H=Object(E.a)(p.a.mark((function e(t,a,n,r){var c,i,l,o,s,m,d,f,v,h,E,g,b,x,j,O,w,C,k,D,N,R,H,P,M,K,L,T;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.width,i=t.height,l=I(n),o=Object(u.a)(l,3),s=o[0],m=o[1],d=o[2],f=a.getImageData(0,0,c,i),v=0,h=0,E=new Map,g=W(S,E),b=Object(y.a)(r);try{for(b.s();!(x=b.n()).done;)j=x.value,O=j.x,w=j.y,h=Math.max(w,h),C=S(O,w),E.set(C,null),v++}catch(p){b.e(p)}finally{b.f()}k=Object(y.a)(r);try{for(k.s();!(D=k.n()).done;)for(N=D.value,R=N.x,H=N.y,P=H;P<h;P++)g(R,P)||(M=B(R,P,c)+0,K=B(R,P,c)+1,L=B(R,P,c)+2,f.data[M]=s,f.data[K]=m,f.data[L]=d,T=S(R,P),E.set(T,null),v++)}catch(p){k.e(p)}finally{k.f()}return e.abrupt("return",Promise.resolve([f,v]));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return String(e)+String(t)}function W(e,t){return function(a,n){var r=e(a,n);return t.has(r)}}function I(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function B(e,t,a){return 4*(e+t*a)}function P(e,t,a,n){null!=e&&e.drawImage(n,0,0,t,a)}function M(){return(M=Object(E.a)(p.a.mark((function e(t,a,n,r,c,i){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),P(a,n,r,c),i(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],i=a[1],l=e.recolorHex,o=Object(u.a)(e.isRedEdit,1)[0],s=Object(u.a)(e.canvasContext,1)[0],d=Object(u.a)(e.detectionThreshold,1)[0],f=Object(u.a)(e.numPixelsColoredRed,2)[1],v=Object(u.a)(e.numPixelsColoredBlue,2)[1],h=Object(u.a)(e.image,1)[0],g=e.canvasDimensions,b=g.canvasWidth,x=g.canvasHeight;function j(){return(j=Object(E.a)(p.a.mark((function e(){var t,a,n,r,c,m,f,v,E;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.width,a=h.height,n={detectionWidth:t,detectionHeight:a},r=s.getImageData(0,0,t,a),c=o?C(d):k(d),e.next=6,D(n,r,c,l);case 6:m=e.sent,f=Object(u.a)(m,2),v=f[0],E=f[1],s.putImageData(v,0,0,0,0,t,a),i(E);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(E.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(h,s,l,c);case 2:t=e.sent,a=Object(u.a)(t,2),n=a[0],r=a[1],(o?f:v)(r),s.putImageData(n,0,0,0,0,b,x);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return j.apply(this,arguments)}(e)}},"Recolor detected"),r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return O.apply(this,arguments)}(e)}},"Color area"),r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){!function(e,t,a,n,r,c){M.apply(this,arguments)}(e,s,b,x,h,o?f:v)}},"Reset"))};a(38);var L=function(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(0),s=Object(u.a)(o,2),m=s[0],f=s[1],v=Object(n.useState)(0),h=Object(u.a)(v,2),p=h[0],E=h[1],g=Object(n.useState)("#00FF00"),b=Object(u.a)(g,2),j=b[0],O=b[1],y=Object(l.a)({numPixelsColoredRed:[m,f],detectionThreshold:[c,i],numPixelsColoredBlue:[p,E],recolorHex:j},e),C={rotationDegrees:e.rotationDegrees,axisCoordinates:e.axisCoordinates};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(x,{isRedEdit:e.isRedEdit})),r.a.createElement("div",null,r.a.createElement(d.a.Label,null,"Recolor:"),r.a.createElement(d.a.Control,{className:"mx-auto input",type:"color",value:j,onChange:function(e){return function(e,t){t(e.target.value)}(e,O)}})),r.a.createElement("div",null,r.a.createElement(d.a.Label,null,"Sensitivity:",c),r.a.createElement(d.a.Control,{className:"mx-auto input",type:"range",min:0,max:255,value:c,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(K,y)),r.a.createElement("div",{className:"m-2"},r.a.createElement(w,C)),r.a.createElement("div",null,r.a.createElement("div",null,"Red pixel count: ",m),r.a.createElement("div",null,"Blue pixel count: ",p),r.a.createElement("div",null,"Red / Blue ratio: ",p/m)))};a(39);var T=function(e){var t=e.image,a=e.canvasDimensions,c=a.canvasWidth,i=a.canvasHeight,l=e.drawDimensions,o=l.drawWidth,s=l.drawHeight,m=Object(u.a)(e.canvasContext,2),d=m[0],f=m[1],v=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=v.current.getContext("2d");f(e)}),[]),Object(n.useEffect)((function(){if(null!=t&&null!=d&&null!=v){var e=v.current;e.width=c,e.height=i,d.drawImage(t,0,0,o,s)}}),[t,o,s,c,i]),r.a.createElement("div",null,r.a.createElement("canvas",{ref:v,className:"border"}))};function A(){return(A=Object(E.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,a);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(40);var F=function(){var e,t,a=Object(n.useState)({}),c=Object(u.a)(a,2),i=c[0],d=c[1],f=Object(n.useState)(!0),h=Object(u.a)(f,2),p=h[0],E=h[1],g=Object(n.useState)(null),b=Object(u.a)(g,2),x=b[0],j=b[1],O=Object(n.useState)(null),w=Object(u.a)(O,2),y=w[0],C=w[1],k=Object(n.useState)(0),D=Object(u.a)(k,2),N=D[0],R=D[1],H=Object(n.useState)(0),S=Object(u.a)(H,2),W=S[0],I=S[1],B=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),P={width:B,height:(e=i.height,t=i.width,e*B/t)},M={image:i,canvasDimensions:{canvasWidth:P.width,canvasHeight:P.height},drawDimensions:{drawWidth:P.width,drawHeight:P.height},canvasContext:[x,j]},K=Object(l.a)({},M,{canvasContext:[y,C]}),F={image:[i,d],isRedEdit:[p,E],canvasContext:p?[x,j]:[y,C],canvasDimensions:{canvasWidth:P.width,canvasHeight:P.height},rotationDegrees:[N,R],axisCoordinates:[W,I]};return r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"Welcome to G-calc"),r.a.createElement("div",null,r.a.createElement(T,M)),r.a.createElement("div",null,r.a.createElement(T,K)),r.a.createElement("div",null,r.a.createElement(o.a,{defaultActiveKey:"0"},r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(o.a.Toggle,{as:m.a,variant:"link",eventKey:"0"},"1. Image input")),r.a.createElement(o.a.Collapse,{eventKey:"0"},r.a.createElement(s.a.Body,null,r.a.createElement(v,{accept:"image/*",label:"Choose image",onChangeHandler:function(e){return function(e,t){return A.apply(this,arguments)}(e,d)}})))),r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(o.a.Toggle,{as:m.a,variant:"link",eventKey:"1"},"2. Image analysis")),r.a.createElement(o.a.Collapse,{eventKey:"1"},r.a.createElement(s.a.Body,null,r.a.createElement(L,F)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(41);i.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.53975dbd.chunk.js.map