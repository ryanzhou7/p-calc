(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{26:function(e,t,a){e.exports=a(39)},31:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=(a(31),a(5)),o=a(17),i=a.n(o),s=a(22);function m(){return(m=Object(s.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&t.target.files.item(0)&&(n=URL.createObjectURL(t.target.files[0]),(r=new Image).src=n,r.onload=function(){a(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=a(41);var f={width:"300px"},d=function(e){var t=e.setImage;return r.a.createElement("div",null,r.a.createElement(v.a.File,{type:"file",accept:"image/*",label:"Custom file input",style:f,custom:!0,onChange:function(e){return function(e,t){return m.apply(this,arguments)}(e,t)}}))};a(36);function h(e,t,a){e.preventDefault(),t((function(e){return e+a}))}function g(e,t,a,n){e.preventDefault(),n((function(e){var n=e.x,r=e.y;return{x:n+t,y:r+a}}))}var E=a(44);var b=function(e){var t=Object(u.a)(e.rotationDegrees,2),a=t[0],n=t[1],l=Object(u.a)(e.axisCoordinates,2),c=l[0],o=l[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"Axis offset Y:",c.y),r.a.createElement("div",null,"Move Vertical"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return g(e,0,-1,o)}},"Move up"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return g(e,0,1,o)}},"Move down")),r.a.createElement("div",null,r.a.createElement("div",null,"Degrees of rotation: ",a),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return h(e,n,-1)}},"Rotate left"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return h(e,n,1)}},"Rotate right")))},y=a(18);function x(e,t,a,n,r){var l=p(n),c=Object(u.a)(l,3),o=c[0],i=c[1],s=c[2];return Math.abs(e-o)+Math.abs(t-i)+Math.abs(a-s)<r}function p(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function j(e,t,a){return 4*(e+t*a)}var O={width:"200px"},w=function(e){var t=e.image,a=e.xAxisYPoint,l=Object(n.useState)(0),c=Object(u.a)(l,2),o=c[0],i=c[1],s=Object(n.useState)(0),m=Object(u.a)(s,2),f=m[0],d=m[1],h=Object(u.a)(e.canvasContext,2),g=h[0],b=(h[1],Object(n.useState)([])),w=Object(u.a)(b,2),C=w[0],k=w[1],N=Object(n.useState)("#0000FF"),I=Object(u.a)(N,2),S=I[0],D=I[1],R=Object(n.useState)("#FF0000"),F=Object(u.a)(R,2),K=F[0],M=F[1],A=function(){var e=function(e,t,a,n,r){for(var l=p(n),c=Object(u.a)(l,3),o=c[0],i=c[1],s=c[2],m=[],v=e.width,f=e.height,d=t.getImageData(0,0,v,f),h=d.data.slice(),g=0;g<f;g++)for(var E=0;E<v;E++){var b=j(E,g,v)+0,y=j(E,g,v)+1,O=j(E,g,v)+2;x(h[b],h[y],h[O],r,a)&&(d.data[b]=Number(o),d.data[y]=Number(i),d.data[O]=Number(s),m.push({x:E,y:g}))}return[d,m]}(t,g,o,S,K),a=Object(u.a)(e,2),n=a[0],r=a[1];g.putImageData(n,0,0),k(r)},T=function(){var e=function(e,t,a,n,r){var l,c=p(a),o=Object(u.a)(c,3),i=o[0],s=o[1],m=o[2],v=e.width,f=e.height,d=t.getImageData(0,0,v,f),h=0,g=0,E=Object(y.a)(n);try{for(E.s();!(l=E.n()).done;){var b=l.value.y;g=Math.max(b,g)}}catch(D){E.e(D)}finally{E.f()}var x,O=Object(y.a)(n);try{for(O.s();!(x=O.n()).done;)for(var w=x.value,C=w.x,k=w.y;k<g+r;k++){var N=j(C,k,v)+0,I=j(C,k,v)+1,S=j(C,k,v)+2;d.data[N]=i,d.data[I]=s,d.data[S]=m,h++}}catch(D){O.e(D)}finally{O.f()}return[d,h]}(t,g,S,C,a),n=Object(u.a)(e,2),r=n[0],l=n[1];d(l),g.putImageData(r,0,0)};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Label,null,"Target detection Color:"),r.a.createElement(v.a.Control,{className:"mx-auto",style:O,type:"color",value:K,onChange:function(e){return function(e){e.preventDefault();var t=e.target.value;M(t)}(e)}}),r.a.createElement(v.a.Label,null,"Recolor:"),r.a.createElement(v.a.Control,{className:"mx-auto",style:O,type:"color",value:S,onChange:function(e){return function(e,t){t(e.target.value)}(e,D)}})),r.a.createElement("div",null,r.a.createElement(v.a.Label,null,"Sensitivity"),r.a.createElement(v.a.Control,{className:"mx-auto",style:O,type:"range",min:"0",max:"255",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return A()}},"Analyze"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return T()}},"Color area")),r.a.createElement("div",null,r.a.createElement("div",null,"Pixel count: ",f)))},C=a(42),k=a(43);function N(e,t,a,n){if(null!=t&&null!=n&&null!=e){e.clearRect(0,0,t.width,t.height),e.save(),e.translate(t.width/2,t.height/2),e.rotate(function(e){return.01745*e}(a));var r=window.innerWidth-10,l=n.height/r*r;e.drawImage(n,-r/2,-l/2),e.restore()}}function I(e,t){null!=t&&null!=e&&e.clearRect(0,0,t.width,t.height)}a(37),a(38);var S=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),o=Object(u.a)(c,2),i=o[0],s=o[1],m=Object(n.useState)(0),v=Object(u.a)(m,2),f=v[0],h=v[1],g=Object(n.useState)({x:0,y:0}),y=Object(u.a)(g,2),x=y[0],p=y[1],j=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=j.current.getContext("2d");s(e)}),[]),Object(n.useEffect)((function(){var e=j.current;I(i,e),function(e,t,a){if(null!=t&&null!=a){var n=window.innerWidth-10,r=a.width,l=a.height/r*n;t.width=n,t.height=l,e.drawImage(a,0,0,n,l)}}(i,e,a)}),[a]),Object(n.useEffect)((function(){var e=j.current;I(i,e),N(i,e,f,a)}),[f]),Object(n.useEffect)((function(){var e=j.current;I(i,e),N(i,e,f,a),function(e,t,a,n){if(null!=t&&null!=n){a.x;var r=a.y,l=t.width,c=t.height/2+r;e.beginPath(),e.moveTo(0,c+r),e.lineTo(0+l,c+r),e.strokeStyle="#FF0000",e.stroke()}}(i,j.current,x,a)}),[x]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Welcome to G-calc"),r.a.createElement("div",null,r.a.createElement("canvas",{ref:j,className:"preview-canvas"})),r.a.createElement("div",null,r.a.createElement(C.a,{defaultActiveKey:"0"},r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(C.a.Toggle,{as:E.a,variant:"link",eventKey:"0"},"1. Image input")),r.a.createElement(C.a.Collapse,{eventKey:"0"},r.a.createElement(k.a.Body,null,r.a.createElement(d,{setImage:l})))),r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(C.a.Toggle,{as:E.a,variant:"link",eventKey:"1"},"2. Image alignment")),r.a.createElement(C.a.Collapse,{eventKey:"1"},r.a.createElement(k.a.Body,null,r.a.createElement(b,{rotationDegrees:[f,h],axisCoordinates:[x,p]})))),r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(C.a.Toggle,{as:E.a,variant:"link",eventKey:"2"},"3. Image analysis")),r.a.createElement(C.a.Collapse,{eventKey:"2"},r.a.createElement(k.a.Body,null,r.a.createElement(w,{image:a,canvasContext:[i,s],xAxisYPoint:x.y})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.ba03c760.chunk.js.map