(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{26:function(e,t,a){e.exports=a(39)},31:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=(a(31),a(5)),i=a(17),o=a.n(i),s=a(22);function m(){return(m=Object(s.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&t.target.files.item(0)&&(n=URL.createObjectURL(t.target.files[0]),(r=new Image).src=n,r.onload=function(){a(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=a(41);var v={width:"300px"},d=function(e){var t=e.setImage;return r.a.createElement("div",null,r.a.createElement(f.a.File,{type:"file",accept:"image/*",label:"Custom file input",style:v,custom:!0,onChange:function(e){return function(e,t){return m.apply(this,arguments)}(e,t)}}))};a(36);function g(e,t,a){e.preventDefault(),t((function(e){return e+a}))}function h(e,t,a,n){e.preventDefault(),n((function(e){var n=e.x,r=e.y;return{x:n+t,y:r+a}}))}var E=a(44);var b=function(e){var t=Object(u.a)(e.rotationDegrees,2),a=t[0],n=t[1],l=Object(u.a)(e.axisCoordinates,2),c=l[0],i=l[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"Axis offset Y:",c.y),r.a.createElement("div",null,"Move Vertical"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return h(e,0,-1,i)}},"Move up"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return h(e,0,1,i)}},"Move down")),r.a.createElement("div",null,r.a.createElement("div",null,"Degrees of rotation: ",a),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return g(e,n,-1)}},"Rotate left"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return g(e,n,1)}},"Rotate right")))},y=a(18);function x(e,t,a,n,r){var l=p(n),c=Object(u.a)(l,3),i=c[0],o=c[1],s=c[2];return Math.abs(e-i)+Math.abs(t-o)+Math.abs(a-s)<r}function p(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function j(e,t,a){return 4*(e+t*a)}var O={width:"200px"},w=function(e){var t=e.resetImage,a=e.image,l=e.xAxisYPoint,c=Object(n.useState)(0),i=Object(u.a)(c,2),o=i[0],s=i[1],m=Object(n.useState)(0),v=Object(u.a)(m,2),d=v[0],g=v[1],h=Object(u.a)(e.canvasContext,2),b=h[0],w=(h[1],Object(n.useState)([])),C=Object(u.a)(w,2),k=C[0],N=C[1],I=Object(n.useState)("#0000FF"),D=Object(u.a)(I,2),S=D[0],R=D[1],F=Object(n.useState)("#FF0000"),K=Object(u.a)(F,2),M=K[0],A=K[1],T=function(){var e=function(e,t,a,n,r){for(var l=p(n),c=Object(u.a)(l,3),i=c[0],o=c[1],s=c[2],m=[],f=e.width,v=e.height,d=t.getImageData(0,0,f,v),g=d.data.slice(),h=0;h<v;h++)for(var E=0;E<f;E++){var b=j(E,h,f)+0,y=j(E,h,f)+1,O=j(E,h,f)+2;x(g[b],g[y],g[O],r,a)&&(d.data[b]=Number(i),d.data[y]=Number(o),d.data[O]=Number(s),m.push({x:E,y:h}))}return[d,m]}(a,b,o,S,M),t=Object(u.a)(e,2),n=t[0],r=t[1];b.putImageData(n,0,0),N(r)},B=function(){var e=function(e,t,a,n,r){var l,c=p(a),i=Object(u.a)(c,3),o=i[0],s=i[1],m=i[2],f=e.width,v=e.height,d=t.getImageData(0,0,f,v),g=0,h=0,E=Object(y.a)(n);try{for(E.s();!(l=E.n()).done;){var b=l.value.y;h=Math.max(b,h)}}catch(S){E.e(S)}finally{E.f()}var x,O=Object(y.a)(n);try{for(O.s();!(x=O.n()).done;)for(var w=x.value,C=w.x,k=w.y;k<h+r;k++){var N=j(C,k,f)+0,I=j(C,k,f)+1,D=j(C,k,f)+2;d.data[N]=o,d.data[I]=s,d.data[D]=m,g++}}catch(S){O.e(S)}finally{O.f()}return[d,g]}(a,b,S,k,l),t=Object(u.a)(e,2),n=t[0],r=t[1];g(r),b.putImageData(n,0,0)};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(f.a.Label,null,"Target detection Color:"),r.a.createElement(f.a.Control,{className:"mx-auto",style:O,type:"color",value:M,onChange:function(e){return function(e){e.preventDefault();var t=e.target.value;A(t)}(e)}}),r.a.createElement(f.a.Label,null,"Recolor:"),r.a.createElement(f.a.Control,{className:"mx-auto",style:O,type:"color",value:S,onChange:function(e){return function(e,t){t(e.target.value)}(e,R)}})),r.a.createElement("div",null,r.a.createElement(f.a.Label,null,"Sensitivity"),r.a.createElement(f.a.Control,{className:"mx-auto",style:O,type:"range",min:"0",max:"255",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return T()}},"Analyze"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){return B()}},"Color area"),r.a.createElement(E.a,{className:"mx-1",onClick:function(e){e.preventDefault(),t()}},"Reset analysis")),r.a.createElement("div",null,r.a.createElement("div",null,"Pixel count: ",d)))},C=a(42),k=a(43);function N(e,t,a,n){if(null!=t&&null!=n&&null!=e){e.clearRect(0,0,t.width,t.height),e.save(),e.translate(t.width/2,t.height/2),e.rotate(function(e){return.01745*e}(a));var r=window.innerWidth-10,l=n.height/r*r;e.drawImage(n,-r/2,-l/2),e.restore()}}function I(e,t){null!=t&&null!=e&&e.clearRect(0,0,t.width,t.height)}a(37),a(38);var D=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),i=Object(u.a)(c,2),o=i[0],s=i[1],m=Object(n.useState)(0),f=Object(u.a)(m,2),v=f[0],g=f[1],h=Object(n.useState)({x:0,y:0}),y=Object(u.a)(h,2),x=y[0],p=y[1],j=Object(n.useRef)(null);function O(){var e=j.current;I(o,e),function(e,t,a){if(null!=t&&null!=a){window.innerWidth;var n=a.width,r=a.height;t.width=n,t.height=r,e.drawImage(a,0,0,n,r)}}(o,e,a)}return Object(n.useEffect)((function(){var e=j.current.getContext("2d");s(e)}),[]),Object(n.useEffect)((function(){O()}),[a]),Object(n.useEffect)((function(){var e=j.current;I(o,e),N(o,e,v,a)}),[v]),Object(n.useEffect)((function(){var e=j.current;I(o,e),N(o,e,v,a),function(e,t,a,n){if(null!=t&&null!=n){a.x;var r=a.y,l=t.width,c=t.height/2+r;e.beginPath(),e.moveTo(0,c+r),e.lineTo(0+l,c+r),e.strokeStyle="#FF0000",e.stroke()}}(o,j.current,x,a)}),[x]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Welcome to G-calc"),r.a.createElement("div",null,r.a.createElement("canvas",{ref:j,className:"preview-canvas"})),r.a.createElement("div",null,r.a.createElement(C.a,{defaultActiveKey:"0"},r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(C.a.Toggle,{as:E.a,variant:"link",eventKey:"0"},"1. Image input")),r.a.createElement(C.a.Collapse,{eventKey:"0"},r.a.createElement(k.a.Body,null,r.a.createElement(d,{setImage:l})))),r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(C.a.Toggle,{as:E.a,variant:"link",eventKey:"1"},"2. Image alignment")),r.a.createElement(C.a.Collapse,{eventKey:"1"},r.a.createElement(k.a.Body,null,r.a.createElement(b,{rotationDegrees:[v,g],axisCoordinates:[x,p]})))),r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(C.a.Toggle,{as:E.a,variant:"link",eventKey:"2"},"3. Image analysis")),r.a.createElement(C.a.Collapse,{eventKey:"2"},r.a.createElement(k.a.Body,null,r.a.createElement(w,{image:a,canvasContext:[o,s],xAxisYPoint:x.y,resetImage:O})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.a366a0ec.chunk.js.map