(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{45:function(t,e,a){t.exports=a.p+"static/media/thick.c9dcc9e1.png"},49:function(t,e,a){t.exports=a(97)},54:function(t,e,a){},64:function(t,e,a){},94:function(t,e,a){},95:function(t,e,a){t.exports=a.p+"static/media/400.1274d929.jpeg"},97:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(21),c=a.n(i),o=(a(54),a(99)),s=a(100),u=a(40),l=a(41),h=a.n(l),d=a(4);var m={source:null,image:null};var f=a(9),v=a(1),p=a.n(v),g=a(6),E=a(14);function y(t){return{type:"SET_COMBINE_CONTEXT",payload:t}}function b(t){return{type:"SET_NUM_COLORED_INNER_PIXELS",payload:t}}function x(t){return{type:"SET_NUM_COLORED_OUTER_PIXELS",payload:t}}var O={context:null,numColoredOuterPixels:0,numColoredInnerPixels:0};var w=a(12);a(64);var _=function(t){var e=Object(f.b)(),a=t.image,i=t.canvasDimensions,c=i.canvasWidth,o=i.canvasHeight,s=t.drawDimensions,u=s.drawWidth,l=s.drawHeight,h=Object(E.a)(t.canvasContext,2),d=h[0],m=h[1],v=Object(n.useRef)(null);return Object(n.useEffect)((function(){var t=v.current.getContext("2d");e(m(t))}),[]),Object(n.useEffect)((function(){if(null!=a&&null!=d){var t=v.current;t.width=c,t.height=o,d.drawImage(a,0,0,u,l)}}),[a,u,l,c,o]),r.a.createElement("div",{className:"mx-auto"},r.a.createElement("canvas",{ref:v}))},j=a(11),N=a(22),C=function t(e){var a=e.x,n=e.y;Object(N.a)(this,t),this.x=a,this.y=n},T=a(43),I=function(){function t(e){var a=e.canvasWidth,n=e.imageArray;Object(N.a)(this,t),this.canvasWidth=a,this.imageArray=n}return Object(T.a)(t,[{key:"rgbPixel",value:function(t){var e=t.x,a=t.y,n=S(e,a,this.canvasWidth)+0,r=S(e,a,this.canvasWidth)+1,i=S(e,a,this.canvasWidth)+2,c=this.imageArray[n],o=this.imageArray[r],s=this.imageArray[i];if(0!==c&&0!==o&&0!==s){var u=S(e,a,this.canvasWidth)+3;this.imageArray[u]}return{r:c,g:o,b:s}}},{key:"rgbaPixel",value:function(t){var e=t.x,a=t.y,n=this.rgbPixel({x:e,y:a}),r=S(e,a,this.canvasWidth)+3,i=this.imageArray[r];return n.alpha=i,n}},{key:"recolor",value:function(t,e){var a=e.r,n=e.g,r=e.b,i=t.x,c=t.y,o=S(i,c,this.canvasWidth)+0,s=S(i,c,this.canvasWidth)+1,u=S(i,c,this.canvasWidth)+2;this.imageArray[o]=Number(a),this.imageArray[s]=Number(n),this.imageArray[u]=Number(r)}},{key:"rRelative",value:function(t){var e=this.rgbPixel(t);e.r,e.g;return e.b}},{key:"tint",value:function(t,e){var a=e.r,n=e.g,r=e.b,i=t.x,c=t.y,o=S(i,c,this.canvasWidth)+0,s=S(i,c,this.canvasWidth)+1,u=S(i,c,this.canvasWidth)+2,l=this.imageArray[o],h=this.imageArray[s],d=this.imageArray[u];this.imageArray[o]+=this.tintDelta(l,a),this.imageArray[s]+=this.tintDelta(h,n),this.imageArray[u]+=this.tintDelta(d,r)}},{key:"tintDelta",value:function(t,e){return(e-t)/3}}]),t}();function S(t,e,a){return 4*(t+e*a)}var R=a(65),A=a(90);function P(t,e,a,n,r){return D.apply(this,arguments)}function D(){return(D=Object(g.a)(p.a.mark((function t(e,a,n,r,i){var c,o,s,u,l,h,d,m,f;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a.x,a.y,(c=[]).push(a),(o=[]).push(a),(s=new Set).add(a);o.length>0;){u=o.pop(),H(u.x,u.y),l=L(u),h=Object(j.a)(l);try{for(h.s();!(d=h.n()).done;)m=d.value,f=H(m.x,m.y),W(m,r)&&!s.has(f)&&k(m,e,a,i)&&(o.push(m),c.push(m)),s.add(f)}catch(n){h.e(n)}finally{h.f()}}return t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t,e,a,n){var r=e.rgbPixel(a),i=R.rgb.lab([r.r,r.g,r.b]),c={L:i[0],A:i[1],B:i[2]},o=e.rgbPixel(t),s=R.rgb.lab([o.r,o.g,o.b]),u={L:s[0],A:s[1],B:s[2]};return A.getDeltaE00(c,u)<n}function W(t,e){var a=t.x,n=t.y;return a>0&&a<e.width&&n>0&&n<e.height}var M=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];function L(t){var e,a=[],n=t.x,r=t.y,i=Object(j.a)(M);try{for(i.s();!(e=i.n()).done;){var c=e.value,o=Object(E.a)(c,2),s=o[0],u=o[1];a.push(new C({x:s+n,y:u+r}))}}catch(l){i.e(l)}finally{i.f()}return a}function X(t,e,a,n){return U.apply(this,arguments)}function U(){return(U=Object(g.a)(p.a.mark((function t(e,a,n,r){var i,c,o,s,u,l,h,d,m,f,v,g,E;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=a.leftX,c=a.rightX,o=a.height,s=0,u=new Set,l=Object(j.a)(r);try{for(l.s();!(h=l.n()).done;)for(d=h.value,m=d.x,f=d.y,v=f;v<o/2-5;v++)g=H(m,v),E={x:m,y:v},!u.has(g)&&i<=m&&m<=c&&(u.add(g),e.tint(E,n),s++)}catch(p){l.e(p)}finally{l.f()}return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t,e){return String(t)+String(e)}var G=a(16),F=a.n(G);function z(t,e,a,n){return B.apply(this,arguments)}function B(){return(B=Object(g.a)(p.a.mark((function t(e,a,n,r){var i,c,o,s,u,l,h,d,m,f,v,g,E,y,b,x,O,w,_,j;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.width,c=e.height,o={detectionWidth:i,detectionHeight:c},s=n.current,u=s.getContext("2d"),t.next=6,Z(e,u);case 6:return l=t.sent,(h=a.context).drawImage(e,0,0,i,c),d=h.getImageData(0,0,i,c),m=new I({canvasWidth:o.detectionWidth,imageArray:d.data}),t.next=13,V(m,o);case 13:return f=t.sent,t.next=16,P(m,f,l,{width:i,height:c},r);case 16:return v=t.sent,t.next=19,J(f,m,i,c);case 19:return g=t.sent,t.next=22,P(m,g,l,{width:i,height:c},r);case 22:return E=t.sent,y=v,b=E,f.y>g.y&&(y=(x=[b,y])[0],b=x[1]),t.next=28,q(y,b);case 28:return O=t.sent,w={r:0,g:255,b:0},t.next=32,X(m,{leftX:O.top.left.x,rightX:O.top.right.x,height:c},w,y);case 32:return _=t.sent,t.next=35,X(m,{leftX:O.bottom.left.x,rightX:O.bottom.right.x,height:c},{r:0,g:0,b:255},b);case 35:return j=t.sent,h.putImageData(d,0,0,0,0,o.detectionWidth,o.detectionHeight),t.abrupt("return",Promise.resolve({topPixelsCount:_,bottomPixelsCount:j}));case 38:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(t,e,a,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(g.a)(p.a.mark((function t(e,a,n,r){var i,c,o,s,u,l,h,d,m,f,v,g;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=r/2,c=n/2,o=Math.abs(e.y-i),s=e.y,l=s,l+=(u=o<s)?-10:10,h={x:c},d=Number.MIN_SAFE_INTEGER,m=u?30:i;m!==l;)f={x:c,y:m},v=a.rgbPixel(f),(g=2*v.r-v.b-v.g)>d&&(h={y:m,x:c},d=g),u?m++:m--;return t.abrupt("return",h);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t,e){return $.apply(this,arguments)}function $(){return($=Object(g.a)(p.a.mark((function t(e,a){var n,r,i,c,o,s,u,l,h;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=a.detectionWidth,r=a.detectionHeight,c={x:i=n/2},o=0,s=30;s<r/2;s++)u={x:i,y:s},l=e.rgbPixel(u),(h=2*l.r-l.b-l.g)>o&&(c.y=s,o=h);return t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t,e){return K.apply(this,arguments)}function K(){return(K=Object(g.a)(p.a.mark((function t(e,a){var n,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=Y(e,a)).top.left.y>185&&n.bottom.left.y>185||n.bottom.left.y>185&&n.top.left.x<n.bottom.left.x||(r=Math.max(n.top.left.x,n.bottom.left.x),n.top.left.x=r,n.bottom.left.x=r),n.top.right.y>185&&n.bottom.right.y>185||n.bottom.right.y>185&&n.top.right.x>n.bottom.right.x||(i=Math.min(n.top.right.x,n.bottom.right.x),n.top.right.x=i,n.bottom.right.x=i),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t,e){var a,n={top:{left:{x:Number.MAX_SAFE_INTEGER,y:void 0},right:{x:0,y:void 0}},bottom:{left:{x:Number.MAX_SAFE_INTEGER,y:void 0},right:{x:0,y:void 0}}},r=Object(j.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value,c=i.x,o=i.y;c<n.top.left.x&&(n.top.left.x=c,n.top.left.y=o),c>n.top.right.x&&(n.top.right.x=c,n.top.right.y=o)}}catch(m){r.e(m)}finally{r.f()}var s,u=Object(j.a)(e);try{for(u.s();!(s=u.n()).done;){var l=s.value,h=l.x,d=l.y;h<n.bottom.left.x&&(n.bottom.left.x=h,n.bottom.left.y=d),h>n.bottom.right.x&&(n.bottom.right.x=h,n.bottom.right.y=d)}}catch(m){u.e(m)}finally{u.f()}return n}function Z(t,e){return tt.apply(this,arguments)}function tt(){return(tt=Object(g.a)(p.a.mark((function t(e,a){var n,r,i,c,o,s,u,l,h;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.width,r=e.height,a.drawImage(e,0,0,n,r),i=a.getImageData(0,0,n,r),450,320,c=F.a.U8_t,o=new F.a.matrix_t(450,320,c),F.a.imgproc.grayscale(i.data,n,r,o),3,8,120,120,F.a.imgproc.gaussian_blur(o,o,8,0),F.a.imgproc.canny(o,o,120,120),s=new Uint32Array(i.data.buffer),255<<24,u=o.cols*o.rows,l=0;--u>=0;)l=o.data[u],s[u]=255<<24|l<<16|l<<8|l;return a.putImageData(i,0,0,0,0,n,r),h=new I({canvasWidth:n,imageArray:i.data}),t.abrupt("return",h);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var et=function(t){var e,a=Object(f.b)(),i=Object(f.c)((function(t){return t.combinedCanvasInfo})),c=Object(f.c)((function(t){return t.image.source})),u=Object(n.useState)(20),l=Object(E.a)(u,2),h=l[0],m=l[1],v=i.numColoredOuterPixels,O=i.numColoredInnerPixels,j=t.webcamRef,N=Object(d.a)({},t,{canvasContext:[i.context,y]}),C=Object(n.useRef)(null);function T(t){m((function(e){return Math.max(0,e+t)}))}function I(t){return S.apply(this,arguments)}function S(){return(S=Object(g.a)(p.a.mark((function t(e){var n,r,o,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h+e,t.next=3,z(c,i,C,n);case 3:r=t.sent,o=r.topPixelsCount,s=r.bottomPixelsCount,a(x(o)),a(b(s)),T(e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c&&I(0)}),[c]),r.a.createElement(o.a,null,c&&r.a.createElement("h2",{className:"card-title"},"Results"),r.a.createElement("div",null,r.a.createElement(_,N),c&&r.a.createElement("div",{className:"d-flex justify-content-around align-items-center mb-4"},r.a.createElement("div",null,r.a.createElement(s.a,{variant:"outline-primary",onClick:function(){window.scrollTo(0,j.current.offsetTop)}},"Retake picture"),r.a.createElement("div",null,r.a.createElement("h3",{className:"mt-4"},"Loss:"," ",(100*((e=v)-O)/e).toFixed(2),"%"))),r.a.createElement(o.a,null,r.a.createElement(o.a.Body,null,r.a.createElement(o.a.Title,null,"Sensitivity: ",h),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-around mb-3"},r.a.createElement(s.a,{onClick:function(t){I(-2)}},r.a.createElement(w.a,{icon:"minus",size:"1x"})),r.a.createElement(s.a,{onClick:function(t){I(2)}},r.a.createElement(w.a,{icon:"plus",size:"1x"}))),r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement(s.a,{onClick:function(t){I(-5)}},r.a.createElement(w.a,{icon:"minus",size:"1x"}),"  ",r.a.createElement(w.a,{icon:"minus",size:"1x"})),r.a.createElement(s.a,{onClick:function(t){I(5)}},r.a.createElement(w.a,{icon:"plus",size:"1x"}),"  ",r.a.createElement(w.a,{icon:"plus",size:"1x"})))))))),r.a.createElement("canvas",{style:{display:"none"},ref:C}))},at=a(45),nt=a.n(at);a(94),a(95);var rt=Object(u.withOrientationChange)((function(t){var e=Object(f.b)(),a=Object(f.c)((function(t){return t.videoReducer.videoConstraints})),i=Object(f.c)((function(t){return t.image.source})),c=Object(f.c)((function(t){return t.canvasSettings.canvasDimensions})),u=t.isPortrait,l=Object(n.useRef)(null),d=Object(n.useRef)(null);Object(n.useEffect)((function(){}),[]);var m=function(){var t,a=l.current.getScreenshot();e((t=a,function(e){var a=new Image;a.onload=function(){e({type:"IMAGE_SOURCE_SET",payload:a})},a.src=t})),e(function(t){return{type:"IMAGE_SET",payload:t}}(a)),window.scrollTo(0,d.current.offsetTop)},v={webcamRef:l,image:i,canvasDimensions:{canvasWidth:c.width,canvasHeight:c.height},drawDimensions:{drawWidth:c.width,drawHeight:c.height},isPortrait:u};return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,{className:"mt-4"},r.a.createElement("h2",{className:"card-title"},"Capture chart"),r.a.createElement("div",{className:"mx-auto"},r.a.createElement("div",{className:"capture-container mx-auto"},r.a.createElement(h.a,{audio:!1,height:a.height,ref:l,screenshotFormat:"image/jpeg",width:a.width,videoConstraints:a}),r.a.createElement("div",{className:"overlay"},r.a.createElement("img",{className:"target",style:{width:a.width-20},src:nt.a})))),r.a.createElement("div",{className:"my-2 z-top mx-auto"},r.a.createElement(s.a,{className:"capture-button",onClick:function(){return m()}},r.a.createElement(w.a,{icon:"camera",size:"3x"})))),r.a.createElement("div",{className:"mt-4",ref:d},r.a.createElement(et,v)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))})),it=a(17),ct=a(46),ot=a(24);it.b.add(ct.a,ot.b,ot.c,ot.a);var st=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(rt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(96);var ut=a(15),lt=a(47);var ht={isOuterEdit:!0};var dt={context:null,recoloredImageData:null,numColoredPixels:0,detectedPixels:[],recolorHex:"#00FF00"};var mt={context:null,recoloredImageData:null,numColoredPixels:0,detectedPixels:[],recolorHex:"#FFA500"};var ft={canvasDimensions:{width:400,height:400}};var vt={videoConstraints:{width:400,height:400,facingMode:{exact:"environment"},audio:!1,imageSmoothing:!0,screenshotQuality:1}};var pt=Object(ut.c)({image:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMAGE_SOURCE_SET":return Object(d.a)({},t,{source:e.payload});case"IMAGE_SET":return Object(d.a)({},t,{image:e.payload});default:return t}},canvasEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_IS_OUTER_EDIT":return Object(d.a)({},t,{isOuterEdit:!t.isOuterEdit});default:return t}},innerCanvasInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_INNER_CONTEXT":return Object(d.a)({},t,{context:e.payload});case"SET_INNER_RECOLORED_IMAGE_DATA":return Object(d.a)({},t,{recoloredImageData:e.payload});case"SET_INNER_DETECTED_PIXELS":return Object(d.a)({},t,{detectedPixels:e.payload});case"SET_INNER_NUM_COLORED_PIXELS":return Object(d.a)({},t,{numColoredPixels:e.payload});case"SET_INNER_RECOLOR_HEX":return Object(d.a)({},t,{recolorHex:e.payload});default:return t}},outerCanvasInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_OUTER_CONTEXT":return Object(d.a)({},t,{context:e.payload});case"SET_OUTER_RECOLORED_IMAGE_DATA":return Object(d.a)({},t,{recoloredImageData:e.payload});case"SET_OUTER_DETECTED_PIXELS":return Object(d.a)({},t,{detectedPixels:e.payload});case"SET_OUTER_NUM_COLORED_PIXELS":return Object(d.a)({},t,{numColoredPixels:e.payload});case"SET_OUTER_RECOLOR_HEX":return Object(d.a)({},t,{recolorHex:e.payload});default:return t}},combinedCanvasInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_COMBINE_CONTEXT":return Object(d.a)({},t,{context:e.payload});case"SET_NUM_COLORED_INNER_PIXELS":return Object(d.a)({},t,{numColoredInnerPixels:e.payload});case"SET_NUM_COLORED_OUTER_PIXELS":return Object(d.a)({},t,{numColoredOuterPixels:e.payload});default:return t}},canvasSettings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CANVAS_DIMENSIONS":return Object(d.a)({},t,{source:e.payload});default:return t}},videoReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,e=arguments.length>1?arguments[1]:void 0;return e.type,t}}),gt=Object(ut.d)(pt,Object(ut.a)(lt.a));c.a.render(r.a.createElement(f.a,{store:gt},r.a.createElement(st,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.9731c554.chunk.js.map