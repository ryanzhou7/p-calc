(this["webpackJsonpcreate-react-plus"]=this["webpackJsonpcreate-react-plus"]||[]).push([[0],{28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),i=(a(33),a(16)),o=a(5),u=a(45),s=a(46),m=a(47),d=a(44);var f={width:"300px"},v=function(e){var t=e.label,a=e.accept,n=e.onChangeHandler;return r.a.createElement("div",null,r.a.createElement(d.a.File,{type:"file",accept:a,label:t,style:f,custom:!0,onChange:function(e){return n(e)}}))},p=a(6),h=a.n(p),b=a(7);function g(e){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(t.target.files&&t.target.files.item(0)){var n=URL.createObjectURL(t.target.files[0]),r=new Image;return r.onload=function(){return e(r)},void(r.src=n)}a("No file selected")})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){var t=Object(o.a)(e.isRedEdit,2),a=t[0],n=t[1],c=function(){n((function(e){return!e}))};return r.a.createElement("div",null,r.a.createElement("div",null,"Currently editing:"),r.a.createElement(m.a,{active:a,className:"mr-2",variant:"outline-danger",onClick:c},"Red"),r.a.createElement(m.a,{active:!a,variant:"outline-primary",onClick:c},"Blue"))},j=a(20);function y(e){return function(t,a,n){return 2*t-(a+n)>255-e}}function O(e){return function(t,a,n){return 2*n-(a+t)>255-e}}function w(e,t,a,n){return C.apply(this,arguments)}function C(){return(C=Object(b.a)(h.a.mark((function e(t,a,n,r){var c,l,i,u,s,m,d,f,v,p,b,g,E,x,j,y,O;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=t.detectionWidth,l=t.detectionHeight,i=D(r),u=Object(o.a)(i,3),s=u[0],m=u[1],d=u[2],f=[],v=a.data.slice(),p=0;p<l;p++)for(b=0;b<c;b++)g=S(b,p,c)+0,E=S(b,p,c)+1,x=S(b,p,c)+2,j=v[g],y=v[E],O=v[x],n(j,y,O)&&(a.data[g]=Number(s),a.data[E]=Number(m),a.data[x]=Number(d),f.push({x:b,y:p}));return e.abrupt("return",Promise.resolve([a,f]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,a,n){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(h.a.mark((function e(t,a,n,r){var c,l,i,u,s,m,d,f,v,p,b,g,E,x,y,O,w,C,k,R,I,W,B,F;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.width,l=t.height,i=D(n),u=Object(o.a)(i,3),s=u[0],m=u[1],d=u[2],f=a.getImageData(0,0,c,l),v=0,p=N(r),b=p.numDetectedPixels,g=p.maxY,E=p.existingPixels,v+=b,x=H(P,E),y=Object(j.a)(r);try{for(y.s();!(O=y.n()).done;)for(w=O.value,C=w.x,k=w.y,R=k;R<g;R++)x(C,R)||(I=S(C,R,c)+0,W=S(C,R,c)+1,B=S(C,R,c)+2,f.data[I]=s,f.data[W]=m,f.data[B]=d,F=P(C,R),E.set(F,null),v++)}catch(h){y.e(h)}finally{y.f()}return e.abrupt("return",Promise.resolve([f,v]));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t,a=new Map,n=0,r=0,c=Object(j.a)(e);try{for(c.s();!(t=c.n()).done;){var l=t.value,i=l.x,o=l.y;r=Math.max(o,r);var u=P(i,o);a.set(u,null),n++}}catch(s){c.e(s)}finally{c.f()}return{numDetectedPixels:n,existingPixels:a,maxY:r}}function P(e,t){return String(e)+String(t)}function H(e,t){return function(a,n){var r=e(a,n);return t.has(r)}}function D(e){var t=0,a=0,n=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],n="0x"+e[5]+e[6]),[t,a,n]}function S(e,t,a){return 4*(e+t*a)}function I(e,t,a,n){null!=e&&e.drawImage(n,0,0,t,a)}function W(){return(W=Object(b.a)(h.a.mark((function e(t,a,n,r,c,l){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),I(a,n,r,c),l(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],l=a[1],i=e.recolorHex,u=Object(o.a)(e.isRedEdit,1)[0],s=Object(o.a)(e.canvasContext,1)[0],d=Object(o.a)(e.detectionThreshold,1)[0],f=Object(o.a)(e.numPixelsColoredRed,2)[1],v=Object(o.a)(e.numPixelsColoredBlue,2)[1],p=Object(o.a)(e.image,1)[0],g=e.canvasDimensions,E=g.canvasWidth,x=g.canvasHeight;function j(){return(j=Object(b.a)(h.a.mark((function e(){var t,a,n,r,c,m,f,v,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.width,a=p.height,n={detectionWidth:t,detectionHeight:a},r=s.getImageData(0,0,t,a),c=u?y(d):O(d),e.next=6,w(n,r,c,i);case 6:m=e.sent,f=Object(o.a)(m,2),v=f[0],b=f[1],s.putImageData(v,0,0,0,0,t,a),l(b);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(b.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(p,s,i,c);case 2:t=e.sent,a=Object(o.a)(t,2),n=a[0],r=a[1],(u?f:v)(r),s.putImageData(n,0,0,0,0,E,x);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return j.apply(this,arguments)}(e)}},"Recolor detected"),r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){return function(){return C.apply(this,arguments)}(e)}},"Color area"),r.a.createElement(m.a,{variant:"outline-primary",className:"mx-1",onClick:function(e){!function(e,t,a,n,r,c){W.apply(this,arguments)}(e,s,E,x,p,u?f:v)}},"Reset"))};a(38);var F=function(e){var t,a=Object(o.a)(e.numPixelsColoredRed,2),c=a[0],l=a[1],u=Object(o.a)(e.numPixelsColoredBlue,2),s=u[0],m=u[1],f=e.isRedEdit,v=Object(n.useState)(0),p=Object(o.a)(v,2),h=p[0],b=p[1],g=Object(n.useState)("#00FF00"),E=Object(o.a)(g,2),j=E[0],y=E[1],O=Object(i.a)({numPixelsColoredRed:[c,l],detectionThreshold:[h,b],numPixelsColoredBlue:[s,m],recolorHex:j},e);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(x,{isRedEdit:f})),r.a.createElement("div",null,r.a.createElement(d.a.Label,null,"Recolor:"),r.a.createElement(d.a.Control,{className:"mx-auto input",type:"color",value:j,onChange:function(e){return function(e,t){t(e.target.value)}(e,y)}})),r.a.createElement("div",null,r.a.createElement(d.a.Label,null,"Sensitivity:",h),r.a.createElement(d.a.Control,{className:"mx-auto input",type:"range",min:0,max:255,value:h,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"m-2"},r.a.createElement(B,O)),r.a.createElement("h5",null,"Results: "),r.a.createElement("div",null,r.a.createElement("div",null,"Red pixel count: ",c),r.a.createElement("div",null,"Blue pixel count: ",s),r.a.createElement("div",null,"Calculated Loss %:"," ",(100*((t=c)-s)/t).toFixed(4))))};a(39);var K=function(e){var t=e.image,a=e.canvasDimensions,c=a.canvasWidth,l=a.canvasHeight,i=e.drawDimensions,u=i.drawWidth,s=i.drawHeight,m=Object(o.a)(e.canvasContext,2),d=m[0],f=m[1],v=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=v.current.getContext("2d");f(e)}),[]),Object(n.useEffect)((function(){if(null!=t&&null!=d&&null!=v){var e=v.current;e.width=c,e.height=l,d.drawImage(t,0,0,u,s)}}),[t,u,s,c,l]),r.a.createElement("div",null,r.a.createElement("canvas",{ref:v,className:"border"}))};function L(){return(L=Object(b.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,a);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=a(25),M=a.n(T),A=(a(40),{width:400,height:400,facingMode:{exact:"environment"}});var J=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),d=Object(o.a)(l,2),f=d[0],p=d[1],h=Object(n.useState)(null),b=Object(o.a)(h,2),g=b[0],E=b[1],x=Object(n.useState)(null),j=Object(o.a)(x,2),y=j[0],O=j[1],w=Object(n.useState)(0),C=Object(o.a)(w,2),k=C[0],R=C[1],N=Object(n.useState)(0),P=Object(o.a)(N,2),H=P[0],D=P[1],S=400,I=400,W={image:a,canvasDimensions:{canvasWidth:S,canvasHeight:I},drawDimensions:{drawWidth:S,drawHeight:I},canvasContext:[g,E]},B=Object(i.a)({},W,{canvasContext:[y,O]}),T={image:[a,c],isRedEdit:[f,p],canvasContext:f?[g,E]:[y,O],canvasDimensions:{canvasWidth:S,canvasHeight:I},numPixelsColoredRed:[k,R],numPixelsColoredBlue:[H,D]},J=Object(n.useRef)(null),U=Object(n.useCallback)((function(){var e=J.current.getScreenshot(),t=new Image;t.onload=function(){c(t)},t.src=e}),[J,c]);return r.a.createElement("div",{className:"App"},r.a.createElement("h4",null,"Welcome to P-calc"),r.a.createElement("div",null,r.a.createElement(u.a,{defaultActiveKey:"0"},r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(u.a.Toggle,{as:m.a,variant:"link",eventKey:"0"},"Image input")),r.a.createElement(u.a.Collapse,{eventKey:"0"},r.a.createElement(s.a.Body,null,r.a.createElement("div",{style:{position:"relative",backgroundColor:"grey",height:"800",display:"inline-block"}},r.a.createElement(M.a,{audio:!1,height:400,ref:J,screenshotFormat:"image/jpeg",width:400,videoConstraints:A}),r.a.createElement("span",{className:"cross",style:{position:"absolute",top:202,right:0,bottom:202,left:0,backgroundColor:"red"}}),r.a.createElement("span",{className:"circle",style:{position:"absolute",top:0,right:0,bottom:0,left:0}}),r.a.createElement("span",{style:{position:"absolute",top:202,right:0,bottom:202,left:0,backgroundColor:"red"}})),r.a.createElement("div",{className:"my-3"},r.a.createElement(m.a,{onClick:U,variant:"outline-primary"},"Take picture")),r.a.createElement(v,{accept:"image/*",label:"Choose image",onChangeHandler:function(e){return function(e,t){return L.apply(this,arguments)}(e,c)}})))),r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(u.a.Toggle,{as:m.a,variant:"link",eventKey:"1"},"Image analysis")),r.a.createElement(u.a.Collapse,{eventKey:"1"},r.a.createElement(s.a.Body,null,r.a.createElement("div",null,r.a.createElement(K,W)),r.a.createElement("div",null,r.a.createElement(K,B)),r.a.createElement(F,T)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(41);l.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.eaade950.chunk.js.map